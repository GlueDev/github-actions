FROM google/cloud-sdk:slim

LABEL "com.github.actions.name" = "Authenticate"
LABEL "com.github.actions.description" = "Only run on certain branches"
LABEL "com.github.actions.icon" = "unlock"
LABEL "com.github.actions.color" = "gray-dark"

LABEL "repository" = "https://github.com/gluedev/github-actions"
LABEL "homepage" = "https://glue.group"
LABEL "maintainer" = "Diederik van den Burger <diederik@glue.group>"

RUN curl -fsSL https://get.docker.com -o /tmp/get-docker.sh
RUN sh /tmp/get-docker.sh

ENV GCLOUD_AUTH "ewogICJ0eXBlIjogInNlcnZpY2VfYWNjb3VudCIsCiAgInByb2plY3RfaWQiOiAiZ2x1ZS1jbGllbnRzIiwKICAicHJpdmF0ZV9rZXlfaWQiOiAiOGViYmI2M2E5NWMxNjEyMTZiZjRkOTA2MWQzZGU5ZmFmMjNlNzNkNyIsCiAgInByaXZhdGVfa2V5IjogIi0tLS0tQkVHSU4gUFJJVkFURSBLRVktLS0tLVxuTUlJRXZnSUJBREFOQmdrcWhraUc5dzBCQVFFRkFBU0NCS2d3Z2dTa0FnRUFBb0lCQVFDNlBGaVE2N21hSUhFbVxuREk1d1Z6TWkwbGhNRnN1Q29iWXRYZHN5LzBLT2lKZ2orMFRKcTI2VWhKdkVpOTV5Z2VsdXNjMFNyTG5ieTRsTFxuVFhSanloNnNrc0J2VngrQzdwZUhFNm9Zd05xSTVndEtsSXJaeS9xNVRDRnpVVUc3aC9XOTZsaEdMK0RrZ25ueVxuS0FicW8rK0szUTRvUUhIbHh4dVJOQnArVUlYcUYxeStQZE5nN21MWnZDY05tRkxIM0FBaDJISkZNMkNzc0YwZFxuTzI5cHFWOW5EQTV6NG1LRDhEWHpKd0hCd0NhbGUzN3NGU2thRS90NmdIV0hCSldwcjhzVkxYSGVUZ2tPS2VRY1xueHllM2FpY0NSQWRLSkxWdmVKQTE2UFNFVUp3MlRnTEI1VnBhUCsyYzZMWVpRMHFBdXNUQmNQalVObU5YTWQ0SlxuVVk4Vno1TFZBZ01CQUFFQ2dnRUFIWStIbFZVOVRDZ2JIYWwva0hoZTN3ZVpTVmFTN2dUQ0dIaGQyejNtTUI2aFxuVzVDK0xlNmVxa2RVUEVIaFNMYXpPVVZTb2tTMWFaeG9pZ0hjMkJ3VWUxcjkzWTVzSzRtNGxwRzUvWnphODBEa1xuaU8yRURxY1FnSW9EZ3p6aUhLU3JqbjRjamVONnBIckxaWE1TQ2Z1RWdidXR6QmpTbTJEYjBOUCs0bzdnZXJQK1xuVFBDSXlUVVdxYllsRlVBaXBTZ29MYko1TVNlei9aZFJBUDdrZUxteHdmemhOREVXR2VoWWZFNmxUWTRRcTMyTVxuRDYwMHRGWkt3bUZFYTJqTTdpd0ZtaFN2Z055VzF3NE13WDdaRlhuL04yNlE1UmFIQ1BIeFlQMm85ejlndHBLMlxuYmV0TXRPcVNlNEt2NmJKNGlZaGYyQlVaQ1Byb1Zib3ZjU0orZkphaXJ3S0JnUURhd09GT1VIK2djR1pKNEsvTFxuSFhiNmphaEZqVDhjT1p0bklhNFlkdk5iMllnYjZ2ZlNtUG1LQzZzWUpUVzhpVFNzUGNPY2pIMXZ5c0tCRkx3VlxudDBXZnlRcHgxSUI3NWhROFZoUGo3ODQ1TE1oWXRtRDg4ZzFvcmZkbzVYTFdXRkhqYm1wUDdKYjdnWFVPTGVNcVxua1Z2Mm8rSVJyZmZlS2VuY3ZjV1BIYjk0ZndLQmdRRFo4aEhaWHNyVG5rL2dhZ1ZEbWRaYU9nbzZ4NXUrV0dYTVxuOXBpSnFsRnluR0JMdmcyaXdhdVE1MlVKQzQ2bmNyeVhIdG5nU1NZemVEanU3ZmNJdWg4cVA3MGdqdnl5dTFBK1xuTFFMMTZFbmFDWS9uSTJaTTB2eDZTREVXamp2eEtBbGN1VFhsdDlCUG9pd1JvZHVKRkROWkRKMnozNmREUHFyWVxuUm9wWkdqcnFxd0tCZ0FXdVdLdVYvNXFGRU1MK2FOSlhrNDF5UEZxQ0RvK0hGM2dZTWRORTA1RWhGeDNTZmxralxueStjLzRsT2dNOE1QdFNSNy9pYUVwNFZOdUx0dGRHMEQ4M1R3M2FxVElEc1hnSk1Ja1Qrc0xLampkdGlHOUFIZFxucjJkMmpTUldRU003Ni9TQ0c1U3p5a0FCM3E1ZGxyYTJTN01lRW5MdkY2N1hXOUYxeERteFJoVzFBb0dCQU5icVxuZ0hOcnFITDVvQ2JhSllxOS9zUkdpNlBmQmxPemM5K2tKRk5Nb3JoMFAva3cxdDF5UWE3SW43ZEZzRXlyTmhHSFxubUs0MU0vaDVTeHRCaWVNUE5vQkJEazAyOHpXRXhPSXJITXBGWDk0a284VDRBWDhzWjFCbU5CSGIvSHdZVVBNZ1xucUdkNDFYQlJxVWRSNXR6TUVMNTFWR1gxM0VqUldVT2dlL2pWaHRlMUFvR0JBS2RscXRLa3JRcHpCQ1oweWZQb1xuWTU5UlZ6RUdtd1JNbDk0K0hETGFMOXBDQVEwaGduV1E3TXVnemxHc0xLcFJvS0ZHOU1PRkVnS3BPV3QwaHp0b1xuSWpWVmVwTERwRVVlcEpIbU8xMDF0akt1ODV5YWVvUTZ5Y3hDSGtaSEtVdFVDREFYQjg1VlArTVgvT2VseE1EMlxuS01neVRPazE4OEZCa1ZUUFVOY2QyT2Y3XG4tLS0tLUVORCBQUklWQVRFIEtFWS0tLS0tXG4iLAogICJjbGllbnRfZW1haWwiOiAiZ2l0aHViLWFjdGlvbnNAZ2x1ZS1jbGllbnRzLmlhbS5nc2VydmljZWFjY291bnQuY29tIiwKICAiY2xpZW50X2lkIjogIjEwNTM4MzA2MzAyODA5MTc4MjE3NCIsCiAgImF1dGhfdXJpIjogImh0dHBzOi8vYWNjb3VudHMuZ29vZ2xlLmNvbS9vL29hdXRoMi9hdXRoIiwKICAidG9rZW5fdXJpIjogImh0dHBzOi8vb2F1dGgyLmdvb2dsZWFwaXMuY29tL3Rva2VuIiwKICAiYXV0aF9wcm92aWRlcl94NTA5X2NlcnRfdXJsIjogImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL29hdXRoMi92MS9jZXJ0cyIsCiAgImNsaWVudF94NTA5X2NlcnRfdXJsIjogImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL3JvYm90L3YxL21ldGFkYXRhL3g1MDkvZ2l0aHViLWFjdGlvbnMlNDBnbHVlLWNsaWVudHMuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iCn0K"

COPY entrypoint.sh /entrypoint.sh
ENTRYPOINT ["/entrypoint.sh"]
